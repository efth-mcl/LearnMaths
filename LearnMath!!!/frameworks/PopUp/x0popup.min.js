/* x0popup - v0.2.0 | http://gao-sun.github.io/x0popup */
"use strict";var x0popup,x0p,x0pDefaultConfig={title:"Message",text:null,theme:"default",overlay:!0,width:"90%",height:"50%",maxWidth:"450px",maxHeight:"200px",type:"text",icon:null,iconURL:null,inputType:null,inputValue:null,inputPlaceholder:null,inputColor:null,inputValidator:null,showCancelButton:null,buttons:null,autoClose:null,html:!1,animation:!0,animationType:"pop",overlayAnimation:!0,keyResponse:!1};x0popup=x0p=function(){function e(){var e="";return e+="width: "+y.width+";",e+="height: "+y.height+";",null!=y.maxWidth&&(e+="max-width: "+y.maxWidth+";"),null!=y.maxHeight&&(e+="max-height: "+y.maxHeight+";"),y.animation&&(e+="-webkit-animation-name: x0p"+y.animationType+"; animation-name: x0p"+y.animationType+";"),!y.overlay&&(e+="outline: 1px solid #ddd"),e}function t(){var e="",t=null==y.icon?y.type:y.icon;switch(e+='<div class="icon-wrapper">',t){case"ok":e+='<i class="xi xi-ok"><span class="xi-ok-left"></span><span class="xi-ok-right"></span></i>';break;case"error":e+='<i class="xi xi-error"><span class="xi-error-left"></span><span class="xi-error-right"></span></i>';break;case"info":e+='<i class="xi xi-info"><span class="xi-info-circle"></span><span class="xi-info-line"></span></i>';break;case"warning":e+='<i class="xi xi-warning"><span class="xi-warning-circle"></span><span class="xi-warning-line"></span></i>';break;case"custom":e+='<i class="xi" style="background: url(\''+y.iconURL+"') no-repeat center center; background-size: 100% 100%;\"></i>"}return e+="</div>"}function n(){var e="";if(d=y.buttons,null==d&&(d=[],1!=y.showCancelButton&&(0==y.showCancelButton||"warning"!=y.type&&"input"!=y.type)||d.push({type:"cancel",key:27}),"text"==y.type||"input"==y.type?d.push({type:"info",key:13}):d.push({type:y.type,key:13})),0==d.length)return"";var t=1==y.keyResponse?"button":"div",n=d.length,i="width: "+(100/n).toFixed(2)+"%; width: calc(100% / "+n+");";e+='<div id="x0p-buttons" class="buttons">';for(var l=0;l<d.length;++l){var a=d[l];e+="<"+t+' id="x0p-button-'+l+'" class="button button-'+a.type+'" style="'+i+'">'+s(a)+"</"+t+">"}return e+="</div>"}function i(e){var t=document.getElementById(e);null!=t&&t.parentNode.removeChild(t)}function l(){document.removeEventListener("keydown",u),i("x0popup"),i("x0p-overlay")}function a(){var e=document.getElementById("x0p-buttons");e.innerHTML='<div class="x0l"><div class="ball ball-4"></div><div class="ball ball-3"></div><div class="ball ball-2"></div><div class="ball ball-1"></div></div>'}function o(){for(var e=d.length-1,t=0;t<d.length;++t){var n=document.getElementById("x0p-button-"+t);!function(e,t){n.addEventListener("click",function(){r(e,t)})}(d[t].type,d[t].showLoading),n.addEventListener("mousedown",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}),1==d[t]["default"]&&(e=t)}if(y.keyResponse&&d.length>0){var i=document.getElementById("x0p-button-"+(d.length-1));i.addEventListener("keydown",function(e){9==e.keyCode&&(document.getElementById("x0p-button-0").focus(),e.preventDefault?e.preventDefault():e.returnValue=!1)}),document.getElementById("x0p-button-"+e).focus()}}function u(e){for(var t=e.keyCode,n=0;n<d.length;++n)if(t==d[n].key){var i=document.getElementById("x0p-button-"+n);e.preventDefault?e.preventDefault():e.returnValue=!1,i&&i.click()}}function r(e,t){var n=document.getElementById("x0popup");if(null!=n){var o=document.getElementById("x0p-input");if("cancel"!=e&&null!=b&&null!=o&&null!=y.inputValidator){var u=y.inputValidator(e,o.value);if(null!=u){i("x0p-input-error");var r=document.getElementById("x0p-text-anchor");return void r.insertAdjacentHTML("beforeend",'<div id="x0p-input-error" class="error">'+u+"</div>")}}clearTimeout(f),1==t?a():l(),null!=x&&x(e,null==o?null:o.value)}}function s(e){if(e.hasOwnProperty("text"))return e.text;switch(e.type){case"ok":case"error":case"info":return"OK";case"warning":return"Confirm";case"cancel":return"Cancel"}return"Button"}function p(){var e=y.inputColor;return null==e?"":"<style>#x0p-input:focus { border-color:"+e+"; color:"+e+"; }</style>"}function c(e){var t=document.createElement("div");return t.innerText=t.textContent=e,e=t.innerHTML}var d,v=arguments[0],x=null,y=JSON.parse(JSON.stringify(x0pDefaultConfig)),f=null;if("string"==typeof v)y.title=arguments[0],void 0!=arguments[1]&&(y.text=arguments[1]),void 0!=arguments[2]&&(y.type=arguments[2]),void 0!=arguments[3]&&("boolean"==typeof arguments[3]?y.overlayAnimation=arguments[3]:x=arguments[3]);else{for(var m in v)y[m]=v[m];void 0!=arguments[1]&&(x=arguments[1])}var h="",g=null==y.icon&&("text"==y.type||"input"==y.type),b=null!=y.inputType?y.inputType:"input"==y.type?"text":null,k=null==y.inputValue?"":y.inputValue,w=null==y.inputPlaceholder?"":y.inputPlaceholder,E=n();y.overlay&&(h+='<div id="x0p-overlay" class="x0p-overlay'+(y.animation&&y.overlayAnimation?"":" no-animation")+'"></div>'),h+='<div id="x0popup" class="x0p '+y.theme+(0==y.animation?" no-animation":"")+(0==d.length?" no-button":"")+'" style="'+e()+'">',h+='<div class="content">',h+=g?'<div class="text-pure-wrapper">':t()+'<div class="text-wrapper">',h+='<div id="x0p-text-anchor" class="text-anchor">',h+='<div class="title">'+y.title+"</div>",null!=y.text&&(h+='<div class="text">'+(y.html?y.text:c(y.text))+"</div>"),null!=b&&(h+='<div class="input">'+p()+'<input id="x0p-input" type="'+b+'" placeholder="'+w+'" value="'+k+'"></div>'),h+="</div>",h+="</div>",h+="</div>",h+=E,h+="</div>",l();var C=document.getElementsByTagName("body");C[0].insertAdjacentHTML("beforeend",h),o(),1==y.keyResponse&&document.addEventListener("keydown",u);var B=document.getElementById("x0p-input");null!=b&&B.focus(),null!=y.autoClose&&(f=setTimeout(function(){r("timeout")},y.autoClose))},x0popup.setDefault=x0p.setDefault=function(){var e=arguments[0];for(var t in e)x0pDefaultConfig[t]=e[t]};